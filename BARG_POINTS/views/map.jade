doctype html
html
    head
        title= title
    body
        #map
        script.
            function initMap(){
                var directionsService = new google.maps.DirectionsService;
                var directionsDisplay = new google.maps.DirectionsRenderer;
                let default_position = {
                        lat: 10.7666851,
                        lng: 106.641758
                };
                let id = window.location.pathname.split('/')[3];
                let map = new google.maps.Map(document.getElementById('map'), {
                    center: default_position,
                    zoom: 13,
                    disableDefaultUI: true
                });
                directionsDisplay.setMap(map)
                axios.get(`http://localhost:8080/point/${id}`)
                .then(response => {
                    let start,end;
                    start = response.data.user
                    end = response.data.driver
                    console.log("asdf",start,end)
                    start= new google.maps.LatLng(start)
                    end = new google.maps.LatLng(end)
                    var request = {
                        origin: start,
                        destination: end,
                        travelMode: 'DRIVING'
                    };
                    directionsService.route(request,function(result,status){
                        if (status == 'OK') {
                            directionsDisplay.setDirections(result);
                        }
                    })

                }) 
                .catch(err=>{
                    console.log(err)
                })             
            }
    //- script(src='/javascripts/map.js')
    script(src='https://code.jquery.com/jquery-3.1.1.min.js')
    script(async='', defer='', src="https://unpkg.com/axios/dist/axios.min.js")
    script(async='', defer='',src='https://maps.googleapis.com/maps/api/js?key=AIzaSyDh7g2FscTKbTHcSpWNvuX6EFWSm81zprQ&callback=initMap&libraries=geometry&sensor=false')

   


            

